# e-commerce docs

1. [요구사항분석](./Requirements.md)
2. [시퀀스 다이어그램](./Sequence.md)
3. [플로우차트](./FlowChart)
4. [ERD](./ERD.md)
5. [API 명세 문서](./ApiDocs.md)

### FlowChart


> ###  목차
> - [주문 API](#주문)
> - [결제 API](#결제)
> - [쿠폰 발급 API](#쿠폰발급)
> - [잔액 충전 API](#충전)
> - [상위 TOP5 상품 조회 API](#상위-TOP5-상품-조회)
---

### 주문
```mermaid
flowchart TD
  A[사용자] --> B[주문 요청]
  B --> C[상품 조회]
  C --> D[재고 확인]

  D -->|재고 부족| E{재고 부족?}
  E -->|예| F[주문 실패]
  F --> G[예외 메시지: 재고 부족]
  E -->|아니오| H[상품 정보 전달]

  H --> I[주문 정보 전달]

  I --> J{쿠폰 있음?}
  J -->|예| K[쿠폰 조회]
  K --> L[유효 쿠폰 검증]
  L -->|검증 실패| M[예외 메시지: 유효하지 않는 쿠폰]
  L -->|검증 성공| N{쿠폰 사용 여부?}

  N -->|예| O[쿠폰 상태 처리]
  O --> P[주문 정보와 쿠폰 사용 전달]
  N -->|아니오| P[주문 정보 전달]

  J -->|아니오| P[주문 정보 전달]

  M --> P[주문 정보 전달]

  P --> Q[결제 진행]


```
---
### 결제
```mermaid
flowchart TD
    A[사용자] --> B[결제 요청]
    B --> C[주문 정보 조회]
    
    C --> D{포인트 조회}
    D -->|잔액 부족| E[예외 메시지: 잔액 부족]
    D -->|잔액 충분| F[포인트 차감]
    
    F --> G[결제 상태 완료 처리]
    G --> H[결제 히스토리 저장]
    G --> I[주문/상품 히스토리 저장]
    
    E --> J[예외 처리 종료]
    G --> K[결제 완료 응답]

```
---
### 쿠폰발급
```mermaid
flowchart TD
A[사용자] --> B[쿠폰 발급 요청]
B --> C[쿠폰 조회]

    C --> D{선착순 쿠폰 종료}
    D -->|예| E[예외 메시지: 쿠폰 발급 종료]
    D -->|아니오| F[쿠폰 발급]
    F --> I[쿠폰 발급 성공]
```
---

### 충전
```mermaid
flowchart TD
A[사용자] --> B[잔액 충전 요청]

    B --> C[잔액 조회]
    C --> D[정책: 비로그인 없음 / 사용자의 초기 잔액은 0]
    C --> E[잔액 충전]
    E --> F[잔액 저장]
    
    F --> G[잔액 정보 전송]
    G --> I[잔액 충전 완료]
```
---

### 상위 TOP5 상품 조회
```mermaid
flowchart TD
A(사용자) --> B[인기 판매 상품 조회 요청]
B --> C[최근 3일간 가장 많이 팔린 상위 5개]
C --> D(인기 판매 상품 정보 반환)
```
---